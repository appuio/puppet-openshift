<%-
def hosts_vars_formater(vars)
  result = ""
  vars.each do |key, value|
    if value.is_a?(TrueClass)
      result += "#{key}=True\n"
    elsif value.is_a?(FalseClass)
      result += "#{key}=False\n"
    elsif value.is_a?(String)
      result += "#{key}=#{value.gsub(/\n/, %q{\\n})}\n"
    else
      result += "#{key}=#{value.to_json}\n"
    end
  end

  return result
end
def children_formater(child)
 result = ""
 child.each do |config|
   result += config['name']
   config.each do |key, value|
     next if key == 'name'
     if value.is_a?(TrueClass)
       result += " openshift_#{key}=True"
     elsif value.is_a?(FalseClass)
       result += " openshift_#{key}=False"
     elsif value.is_a?(String)
       result += " openshift_#{key}='#{value}'"
     else
       result += " openshift_#{key}='#{value.to_json}'"
     end
   end

   result += "\n"
 end

 return result
end
if @masters_as_nodes
  @ansible_hosts_children['nodes'] = @ansible_hosts_children['nodes'].concat(@ansible_hosts_children['masters'])
  _ansible_hosts_children = @ansible_hosts_children
else
  _ansible_hosts_children = @ansible_hosts_children
end
-%>
# THIS FILE IS MANAGED BY PUPPET MODULE openshift
[OSEv3:children]
<%- @ansible_hosts_children.keys.each do |k| -%>
<%= k %>
<%- end -%>

[OSEv3:vars]
<%= hosts_vars_formater(@ansible_hosts_vars) %>
<%- _ansible_hosts_children.keys.each do |k| -%>
[<%= k %>]
<%= children_formater(_ansible_hosts_children[k]) %>
<%- end -%>
